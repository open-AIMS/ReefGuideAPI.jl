<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started | ReefGuideAPI.jl</title>
    <meta name="description" content="An API for Reef Guidance">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/ReefGuideAPI.jl/dev/assets/style.DVWXPQgb.css" as="style">
    <link rel="preload stylesheet" href="/ReefGuideAPI.jl/dev/vp-icons.css" as="style">
    
    <script type="module" src="/ReefGuideAPI.jl/dev/assets/app.CimegBLF.js"></script>
    <link rel="preload" href="/ReefGuideAPI.jl/dev/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/ReefGuideAPI.jl/dev/assets/chunks/theme.C0fTnttW.js">
    <link rel="modulepreload" href="/ReefGuideAPI.jl/dev/assets/chunks/framework.lfJpU6fD.js">
    <link rel="modulepreload" href="/ReefGuideAPI.jl/dev/assets/getting_started.md.D5zw42rz.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-492508fc></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-492508fc>Skip to content</a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar" data-v-f1e365da data-v-822684d1><div class="wrapper" data-v-822684d1><div class="container" data-v-822684d1><div class="title" data-v-822684d1><div class="VPNavBarTitle" data-v-822684d1 data-v-0f4f798b><a class="title" href="/ReefGuideAPI.jl/dev/" data-v-0f4f798b><!--[--><!--]--><!----><span data-v-0f4f798b>ReefGuideAPI.jl</span><!--[--><!--]--></a></div></div><div class="content" data-v-822684d1><div class="content-body" data-v-822684d1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-822684d1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-822684d1 data-v-e6d46098><span id="main-nav-aria-label" class="visually-hidden" data-v-e6d46098> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ReefGuideAPI.jl/dev/" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/ReefGuideAPI.jl/dev/getting_started" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Getting Started</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ReefGuideAPI.jl/dev/docker" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>Docker</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ReefGuideAPI.jl/dev/api" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>API</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-822684d1 data-v-af096f4a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-af096f4a data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-822684d1 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/open-AIMS/ReefGuideAPI.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-822684d1 data-v-925effce data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-04f5c5e9><span class="vpi-more-horizontal icon" data-v-04f5c5e9></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><!----><!--[--><!--[--><!----><div class="group" data-v-925effce><div class="item appearance" data-v-925effce><p class="label" data-v-925effce>Appearance</p><div class="appearance-action" data-v-925effce><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-925effce data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-925effce><div class="item social-links" data-v-925effce><div class="VPSocialLinks social-links-list" data-v-925effce data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/open-AIMS/ReefGuideAPI.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-822684d1 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-822684d1><div class="divider-line" data-v-822684d1></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-168ddf5d><button data-v-168ddf5d>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6d7b3c46 data-v-b38bf2ff><div class="content" data-v-b38bf2ff><div class="outline-marker" data-v-b38bf2ff></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b38bf2ff>On this page</div><ul class="VPDocOutlineItem root" data-v-b38bf2ff data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _ReefGuideAPI_jl_dev_getting_started" data-v-83890dd9><div><h1 id="Getting-Started" tabindex="-1">Getting Started <a class="header-anchor" href="#Getting-Started" aria-label="Permalink to &quot;Getting Started {#Getting-Started}&quot;">​</a></h1><h2 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h2><p>Initialize the project the usual way:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]instantiate</span></span></code></pre></div><p>A TOML file should be defined indicating location of the MPA dataset. These are currently the files/data created in Step/Script 1a in <a href="https://github.com/open-AIMS/GBR-reef-guidance-assessment" target="_blank" rel="noreferrer">https://github.com/open-AIMS/GBR-reef-guidance-assessment</a></p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepped_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PREPPED_DATA_DIR = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C:/some_path_to_data/MPA/&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">server_config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TIFF_CACHE_DIR = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;some location to cache geotiffs&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">REGIONAL_CACHE_DIR = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;some location to cache regional datasets&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DEBUG_MODE = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Optional, disables file caching and displays debug logs</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">COG_THREADS = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Optional, Number of threads to use when creating COGs (defaults to 1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TILE_SIZE = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;256&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Optional, tile block size to use (defaults to 256)</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>By convention, this file is named <code>.config.toml</code> (note the leading <code>.</code>).</p></div><h2 id="JWT-Auth-configuration" tabindex="-1">JWT Auth configuration <a class="header-anchor" href="#JWT-Auth-configuration" aria-label="Permalink to &quot;JWT Auth configuration {#JWT-Auth-configuration}&quot;">​</a></h2><p>The API can be additionally configured to expect a valid JWT in the <code>Authorization: Bearer &lt;token&gt;</code> header format.</p><p>Add the following to <code>.config.toml</code>:</p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jwt_auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Enable JWT auth : bool true/false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JWT_ENABLED = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Which iss to validate for the JWTs?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JWT_ISS = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://issuer.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># WKT JWKS endpoint where public key can be retrieved</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WKT_ENDPOINT = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://https://issuer.com/api/.well-known/jwks.json&quot;</span></span></code></pre></div><p>Pay attention to the issuer and wkt endpoints. The first should exactly match the expected JWT issuer claim. The second should be web-resolvable and return a WKT JSON which provides the public key.</p><h3 id="Auth-TODOs" tabindex="-1">Auth TODOs <a class="header-anchor" href="#Auth-TODOs" aria-label="Permalink to &quot;Auth TODOs {#Auth-TODOs}&quot;">​</a></h3><ul><li>ensure health check route is not authorised</li></ul><h2 id="quickstart" tabindex="-1">Quickstart <a class="header-anchor" href="#quickstart" aria-label="Permalink to &quot;Quickstart&quot;">​</a></h2><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ReefGuideAPI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># To enable debug messages:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ENV[&quot;JULIA_DEBUG&quot;] = &quot;ReefGuideAPI&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># If multiple threads are available, a parallel server will be spun up</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ReefGuideAPI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">start_server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.config.toml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>For best performance, start with at least one interactive thread:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">julia</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --project=.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --threads=4,1</span></span></code></pre></div></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The config setting <code>COG_THREADS</code> controls how many threads should be requested when writing out COGs. Ideally this will be set to at least 2 (preferably 4). Higher values do seem to reduce write times but with diminishing returns (tested up to 8). Locally, write times with four threads configured range from 10 to 15 seconds.</p></div><p>In its current state, the main page displays a simple form for dev/testing purposes.</p><h2 id="Dynamic-COG-generation" tabindex="-1">Dynamic COG generation <a class="header-anchor" href="#Dynamic-COG-generation" aria-label="Permalink to &quot;Dynamic COG generation {#Dynamic-COG-generation}&quot;">​</a></h2><p>Example URL:</p><div class="language-code vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">code</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://127.0.0.1:8000/assess/Cairns-Cooktown/slopes?Depth=-9.0:0.0&amp;Slope=0.0:40.0</span></span></code></pre></div><h2 id="Simple-Slippy-Tiles" tabindex="-1">Simple Slippy Tiles <a class="header-anchor" href="#Simple-Slippy-Tiles" aria-label="Permalink to &quot;Simple Slippy Tiles {#Simple-Slippy-Tiles}&quot;">​</a></h2><p>Example URL:</p><div class="language-code vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">code</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://127.0.0.1:8000/tile/8/231/139?region=Cairns-Cooktown&amp;rtype=slopes&amp;Depth=-9.0:0.0&amp;Slope=0.0:40.0&amp;Rugosity=0.0:3.0</span></span></code></pre></div><h2 id="Development-setup" tabindex="-1">Development setup <a class="header-anchor" href="#Development-setup" aria-label="Permalink to &quot;Development setup {#Development-setup}&quot;">​</a></h2><p>The steps below assumes you are in the project root.</p><p>Create a sandbox enviroment:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sandbox</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sandbox</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> julia</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --project=.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sandbox</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">julia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Revise</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Infiltrator</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Chairmarks</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sandbox</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">julia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ..</span></span></code></pre></div><p>Copy the quickstart to a file (e.g., <code>dev_server.jl</code>).</p><p>Create the <code>.config.toml</code> file and save to the sandbox directory.</p><p>Assuming VS Code is configured to default to the sandbox environment and start the Julia REPL at project root:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;cd sandbox</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dev_server.jl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Note that the server now caches the initially loaded spatial data in between server launches to reduce downtime. It will be necessary to restart the Julia session to reload spatial data.</p><h2 id="Performance-notes" tabindex="-1">Performance notes <a class="header-anchor" href="#Performance-notes" aria-label="Permalink to &quot;Performance notes {#Performance-notes}&quot;">​</a></h2><p>The config setting <code>COG_THREADS</code> controls how many threads should be requested when writing out COGs. Ideally this will be set to at least 2 (preferably 4). Higher values do seem to reduce write times but with diminishing returns (tested up to 8). Locally, write times with four threads configured range from 10 to 15 seconds.</p><h2 id="Reef-edge-alignment-for-site-searching" tabindex="-1">Reef edge alignment for site searching <a class="header-anchor" href="#Reef-edge-alignment-for-site-searching" aria-label="Permalink to &quot;Reef edge alignment for site searching {#Reef-edge-alignment-for-site-searching}&quot;">​</a></h2><p><code>identify_edge_aligned_sites()</code> can be used to identify potential sites that only align with the nearest reef edge (or specified rotations away from this angle). This method works by identifying the closest edge of reef polygon geometries that have been converted into lines.</p><p>The following processing is required before use:</p><ul><li><p>Reef polygons should be simplified (<code>GO.simplify()</code>) and buffered to avoid matching possibly inaccurate reef edges.</p></li><li><p>Simplified reef polygons should be provided as vertex-vertex lines with <code>polygon_to_lines()</code>.</p></li><li><p>Require raster of target pixels to search, and their indices (currently a vector of <code>CartesianIndices</code> for identifying search pixels). Use <code>findall(bool_search_raster)</code> to return pixel indices.</p></li><li><p>Raster of search pixels should be masked by reef polygons or simplified reef polygons.</p></li><li><p>The target region name should be specified in GBRMPA format.</p><ul><li>E.g. &quot;Townsville/Whitsunday Management Area&quot; rather than &quot;Townsville-Whitsunday&quot;.</li></ul></li></ul><h3 id="Parquet-assessment-additional-setup" tabindex="-1">Parquet assessment additional setup <a class="header-anchor" href="#Parquet-assessment-additional-setup" aria-label="Permalink to &quot;Parquet assessment additional setup {#Parquet-assessment-additional-setup}&quot;">​</a></h3><ul><li><p>A parquet GeoDataFrame must be loaded and filtered for unsuitable pixels based on user criteria thresholds using a Dict and <code>within_thresholds()</code>.</p></li><li><p><code>lons</code> and <code>lats</code> columns (FLoat64) must be added to the GeoDataFrame.</p><ul><li>E.g. <code>valid_pixels.lons = first.(GI.coordinates.(valid_pixels.geometry))</code></li></ul><p>The column used for masking should be the same as the column specified as geometry_col in <code>identify_edge_aligned_sites</code>(default =<code>:geometry</code>).</p></li></ul></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-4f9813fa><!--[--><!--]--><div class="edit-info" data-v-4f9813fa><div class="edit-link" data-v-4f9813fa><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/open-AIMS/ReefGuideAPI.jl/edit/main/docs/src/getting_started.md" target="_blank" rel="noreferrer" data-v-4f9813fa><!--[--><span class="vpi-square-pen edit-link-icon" data-v-4f9813fa></span> Edit this page<!--]--></a></div><!----></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860>Made with <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/" target="_blank"><strong>DocumenterVitepress.jl</strong></a><br></p><p class="copyright" data-v-c970a860>© Copyright 2025.</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api.md\":\"vBBJ3uKz\",\"docker.md\":\"CHM2_5Jy\",\"getting_started.md\":\"D5zw42rz\",\"index.md\":\"3bxXzOWs\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"ReefGuideAPI.jl\",\"description\":\"An API for Reef Guidance\",\"base\":\"/ReefGuideAPI.jl/dev/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Getting Started\",\"link\":\"/getting_started\"},{\"text\":\"Docker\",\"link\":\"/docker\"},{\"text\":\"API\",\"link\":\"/api\"}],\"sidebar\":[],\"editLink\":{\"pattern\":\"https://github.com/open-AIMS/ReefGuideAPI.jl/edit/main/docs/src/:path\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/open-AIMS/ReefGuideAPI.jl\"}],\"footer\":{\"message\":\"Made with <a href=\\\"https://luxdl.github.io/DocumenterVitepress.jl/dev/\\\" target=\\\"_blank\\\"><strong>DocumenterVitepress.jl</strong></a><br>\",\"copyright\":\"© Copyright 2025.\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>